<div class="container mt-4">
  <!-- Doctor Details Card -->
  <div class="doctor-card shadow-lg p-4 d-flex flex-row align-items-center">
    <img [src]="doctorDetails?.photoUrl" alt="Doctor Photo" class="doctor-img me-4">
    <div>
      <h3 class="doctor-name">
        {{ doctorDetails?.name }} <span class="verified-icon">&#10004;</span>
      </h3>
      <p class="doctor-info">
        {{ doctorDetails?.education }} – <span class="specialization">{{ doctorDetails?.specialization }}</span>
      </p>
      <span class="badge bg-gradient-primary experience-badge">
        {{ doctorDetails?.experienceYears }} Years Experience
      </span>
      <p class="address mt-3"><i class="bi bi-geo-alt-fill"></i> {{ doctorDetails?.address }}</p>
      <p class="fee"><strong>Appointment Fee:</strong> ₹{{ doctorDetails?.appointmentFee }}</p>
    </div>
  </div>
 
  <!-- Booking Section -->
  <div class="booking-section mt-4">
    <h4 class="section-title">Booking Slots</h4>
    <div *ngIf="isLoadingAvailability" class="text-muted">Loading availability…</div>
    <div *ngIf="availabilityError" class="alert alert-danger">{{ availabilityError }}</div>
 
    <div *ngIf="!isLoadingAvailability && !availabilityError && slots.length === 0" class="text-muted mb-3">
      No slots available for this doctor.
    </div>
 
    <!-- Day Buttons -->
    <div class="slot-container">
      <div class="d-flex gap-2 mb-3 flex-wrap day-buttons">
        <button *ngFor="let day of slots" class="btn day-btn"
                [class.active]="selectedDay === day.date"
                (click)="selectDay(day)">
          {{ day.date }}
        </button>
      </div>
 
      <!-- Slot Buttons -->
      <div class="d-flex gap-2 flex-wrap slot-buttons">
        <button *ngFor="let slot of selectedDaySlots; let i = index" class="btn slot-btn"
                [class.active]="selectedSlot === slot.slotID"
                (click)="selectSlot(slot)">
          {{ slot.time }} - {{ getEndTime(i, selectedDaySlots) }}
        </button>
      </div>
    </div>
 
    <!-- Reason Field -->
    <div class="mt-3">
      <label for="reason" class="form-label"><strong>Reason for Appointment:</strong></label>
      <textarea id="reason" [(ngModel)]="appointmentReason" class="form-control reason-box" rows="2"
                placeholder="Enter reason (e.g., consultation, follow-up, etc.)"></textarea>
    </div>
 
    <div *ngIf="bookingError" class="text-danger mt-2">{{ bookingError }}</div>
 
    <!-- Book Button -->
    <button *ngIf="slots.length > 0" class="btn btn-gradient mt-3"
            [disabled]="!selectedSlot || bookingInProgress || !appointmentReason"
            (click)="bookAppointment()">
      <span *ngIf="bookingInProgress" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
      Book an Appointment
    </button>
  </div>
  
</div>
 